<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">   
    <link rel="stylesheet" href="/Style/createPage.css">
    <link rel="stylesheet" href="/Style/sidebar.css">
    <link rel="stylesheet" href="/Style/dashboard.css">
</head>
<body>
    <%- include('../../../Partials/header.ejs') %>
    <div class="dashboard-container">
        <aside class="dashboard-sidebar">
            <%- include('../../../Partials/sidebar.ejs') %>
        </aside>
        <main class="dashboard-main-content">
            <div class="modern-profile-container">
                <div class="modern-profile-card">
                    <div class="profile-pic-block">
                        <img src="<%= user.profilePics %>" alt="profile_picture" id="profilePics">
                        <form action="/Uploads/profilePics" id="profilePicsForm">
                            <input type="file" name="profilePics" id="profilePicsinput" accept="image/*">
                            <div class="btn">
                                <input type="button" value="Add"  id="addBtn" >
                                <input type="button" value="Remove" id="removeProfilePics" style="display: <%= user.profilePics.includes('image-copy.png') ? 'none' : 'block' %>;">
                            </div>
                        </form>
                    </div>
                    <div class="modern-profile-form"> 
                        <h2>Update your profile</h2>    
                        <form action="/dashboard/edit-profile" method="POST">
                            <div class="modern-form-group">
                                <label for="name">Name</label>
                                <input type="text" name="name" value="<%= profile.name %>" id="name" placeholder="Enter your name" required>
                            </div>
                            <div class="modern-form-group">
                                <label for="email">Email</label>
                                <input type="email" name="email" id="email" disabled value="<%= user.email %>" placeholder="Enter your email" required>
                            </div>
                            <div class="modern-form-group">
                                <label for="title">Short Title</label>
                                <input type="text" name="title" value="<%= profile.title %>" id="title" placeholder="Enter a short title" required>
                            </div>
                            <div class="modern-form-group">
                                <label for="bio">Short Bio</label>
                                <input type="text" name="bio" value="<%= profile.bio %>" id="bio" placeholder="Enter your short bio" required>
                            </div>
                            <div class="modern-form-group link-group">
                                <label for="link">Your Social Links</label>
                                <div class="totalIndividual">
                                    <div class="individual-link">
                                        <i class="fab fa-facebook"></i>
                                        <input type="text" name="facebook" value="<%= profile.socialLinks.facebook %>" id="facebook" placeholder="Facebook link" >
                                    </div>
                                    <div class="individual-link">
                                        <i class="fab fa-twitter"></i>
                                        <input type="text" name="twitter" value="<%= profile.socialLinks.twitter %>" id="twitter" placeholder="Twitter (X) link" >
                                    </div>
                                    <div class="individual-link">
                                        <i class="fab fa-github"></i>
                                        <input type="text" name="github" value="<%= profile.socialLinks.github %>" id="github" placeholder="Github link" >
                                    </div>
                                    <div class="individual-link">
                                        <i class="fab fa-linkedin"></i>
                                        <input type="text" name="linkedin" value="<%= profile.socialLinks.linkedin %>" id="linkedin" placeholder="LinkedIn link" >
                                    </div>
                                    <div class="individual-link">
                                        <i class="fab fa-instagram"></i>
                                        <input type="text" name="instagram" value="<%= profile.socialLinks.instagram %>" id="instagram" placeholder="Instagram link" >
                                    </div>
                                    <div class="individual-link">
                                        <i class="fab fa-globe"></i>
                                        <input type="text" name="website" value="<%= profile.socialLinks.website %>" id="globe" placeholder="Website link" >
                                    </div>  
                                </div> 
                                <button type="submit" class="createProfileBtn">Update Profile</button> 
                            </div> 
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.js"></script>    
    <script src="/Public/Scripts/editProfile.js"></script>
    <script>
        <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
            <% errors.forEach(function(error) { %>
                toastr.error('<%= error.msg %>');
            <% }); %>
        <% } %>
    </script>   
</body>
</html>